<nav class="fixed top-0 w-full z-50 transition-all duration-300" id="mainNavbar">
  <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-md border-b border-white/10 shadow-lg" id="navbarBg"></div>
  <div class="container mx-auto px-6 relative">
    <div class="flex items-center justify-between h-20">

      <!-- Brand -->
      <a class="text-2xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent transform hover:scale-105 transition-transform duration-300"
        href="/">
        Blogify
      </a>

      <!-- Mobile Menu Button -->
      <button class="md:hidden text-slate-300 hover:text-white focus:outline-none" id="mobileMenuBtn">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
      </button>

      <!-- Desktop Menu -->
      <div class="hidden md:flex items-center space-x-6">
        <a class="nav-link <%= locals.path === '/' ? 'text-white' : 'text-slate-300' %>" href="/">Home</a>

        <% if (locals.user) { %>
          <a class="nav-link flex items-center gap-2" href="/Blog/new-blog">
            <span>‚úçÔ∏è</span> Add Blog
          </a>

          <div class="relative group">
            <button
              class="flex items-center gap-2 text-slate-300 hover:text-white font-medium py-2 px-4 rounded-lg hover:bg-white/10 transition-all duration-300">
              <img src="<%= locals.user.profileImage || 'https://ui-avatars.com/api/?name=' + locals.user.fullname %>"
                class="w-8 h-8 rounded-full border border-purple-500/50 object-cover" alt="Profile">
              <span>
                <%= locals.user.fullname %>
              </span>
              <svg class="w-4 h-4 ml-1 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div
              class="absolute right-0 mt-2 w-48 bg-slate-900 border border-slate-700 rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transform group-hover:translate-y-0 translate-y-2 transition-all duration-300 overflow-hidden">
              <a class="block px-4 py-3 text-slate-300 hover:bg-slate-800 hover:text-purple-400 transition-colors"
                href="/user/logout">
                üö™ Logout
              </a>
            </div>
          </div>
          <% } else { %>
            <a class="text-slate-300 hover:text-white font-medium transition-colors" href="/user/signin">Sign In</a>
            <a class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-2.5 px-6 rounded-full shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 transform hover:scale-105 transition-all duration-300"
              href="/user/signup">
              Get Started
            </a>
            <% } %>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    class="md:hidden absolute top-20 left-0 w-full bg-slate-900/95 backdrop-blur-xl border-b border-slate-700 transform -translate-y-[150%] transition-transform duration-300 ease-in-out shadow-2xl"
    id="mobileMenu">
    <div class="flex flex-col p-6 space-y-4">
      <a class="text-lg font-medium text-slate-300 hover:text-purple-400" href="/">Home</a>
      <% if (locals.user) { %>
        <a class="text-lg font-medium text-slate-300 hover:text-purple-400" href="/Blog/new-blog">Add Blog</a>
        <div class="border-t border-slate-700 pt-4 mt-2">
          <div class="flex items-center gap-3 mb-4 text-slate-300">
            <img src="<%= locals.user.profileImage || 'https://ui-avatars.com/api/?name=' + locals.user.fullname %>"
              class="w-10 h-10 rounded-full border border-purple-500" alt="">
            <span class="font-bold">
              <%= locals.user.fullname %>
            </span>
          </div>
          <a class="block text-red-400 font-medium" href="/user/logout">Logout</a>
        </div>
        <% } else { %>
          <div class="grid grid-cols-2 gap-4 mt-4">
            <a class="text-center py-3 rounded-lg border border-slate-600 text-slate-300 hover:border-purple-500 hover:text-purple-400"
              href="/user/signin">Sign In</a>
            <a class="text-center py-3 rounded-lg bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold"
              href="/user/signup">Sign Up</a>
          </div>
          <% } %>
    </div>
  </div>
</nav>

<% if (locals.error) { %>
  <div class="fixed top-24 right-5 z-50 animate-fade-in flash-message">
    <div
      class="bg-red-500/10 backdrop-blur-md border border-red-500/50 text-red-200 px-6 py-4 rounded-xl shadow-xl flex items-center gap-3">
      <svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <%= locals.error %>
    </div>
  </div>
  <% } %>